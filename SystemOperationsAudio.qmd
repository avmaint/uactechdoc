---
title: "System Operations - Audio"
author: "UAC Media Arts"
execute: 
  eval: true
  echo: false
  warning: false
  message: false
format:
  html:
    toc: true
  pdf:
     toc: true
  titlepage-pdf:
    toc: true

always_allow_html: yes
---

```{r setup, include=FALSE}
source("commonPackages.R")
```

```{r functions}
source("commonFunctions.R")
source("commonFunctionsAudio.R")
```

```{r data}
inventoryfile <- get.inventory()
```

# Introduction
This document provides basic operating information for each of the main auditorium audio system at UAC.

Purpose of our Sound System:

* Necessary to help the hearing impaired ( roughly 10% of the population) 
* Supports video recording and streaming
* For music, creates a pleasing blend of all the instruments and vocals
* Helps audience to focus and concentrate
* Reinforces the message (spoken or sung)

## Audio System Overview


```{dot fig-soa-system-overview }
//| label: fig-soa-system-overview
//| fig-cap: Audio System Overview
//| cap-location: bottom
//| file: gv/soa-audio-overview.gv
```

# Power On and Off

## Power On

To the left of the audio console there is a small touch screen that displays the church logo. 

* Touch it once to bring up the menu.
* In the upper left there will be a button that says "Off", which is the current state, touch it and the system start up sequence will begin.
* Wait about two minutes and the system will be ready to use.
* Meanwhile take off and stow the dust cover.
* The next step is, typically, to recall the desired scene. To do so touch the "scene" button on the right hand side of the console. Then on the right hand console screen, scroll to find the scene you want, touch it and then press the "Go" button which is also on the right hand side. 
  
:::{.callout-important}
If you don't know what scene to use, please discuss with Terry.
:::

:::{.callout-note}
Although not part of the audio system, it is often the audio engineer who turns on portions of lighting (blue button) and video system (switch #4) as well
::: 
 
## Power Off 

* on the right side of the console, push the "Home" button.
* on the right screen, there will be a button labelled "Power Down", touch it.
* put on the dust cover
* on the mini touch screen on the left side of the console, touch it once to bring up the menu, and then touch the "On" button in the upper left. The system will then begin the power down sequence.

# Training Videos

See (@fig-training-videos) for a list of training videos. The titles are links you can follow.
 
```{r training}
#| fig-cap: "Training Videos"
#| cap-location: bottom
#| label: fig-training-videos
#| 
get.training() |>
  filter(Topic1=="Audio") |>
  filter(Topic2 %in% c(	"Console Operations", "Mixing" )) |>
  filter(Topic3 != "01 Basic DM1K"  ) |>
  mutate(Title = md(glue("[{Title}]({URL})"))) |>	
  select(Topic3, Episode, Duration , Title, Notes )  |>
  arrange(Topic3, Episode) |>	
  rename(Module = Topic3) |>
  gt(rowname_col = "Episode", groupname_col="Module") |>  
	   #summary_rows(fns = list("n") ) |>
		opt_stylize(style = 3) |>
	    opt_row_striping(  row_striping = TRUE) |>
	fmt_markdown(
  columns = "Title",
  rows = everything(),
  md_engine = c("markdown")) |>
  sub_missing( columns =  "Notes",
				rows = everything(),
				missing_text = "---") |>
	cols_align( align =   "left"  ,
				columns =  "Title")
```

There is a good collection of videos on YouTube from the [Dante Certification program](https://www.audinate.com/learning/training-certification/dante-certification-program) . You can enroll in the program which will give you access to all of the videos. The level 1 videos are listed here @fig-training-videos-dante.

```{r training-dante}
#| fig-cap: "Dante Training Videos"
#| label: fig-training-videos-dante
#| 
get.training() |>
  filter(Topic1=="Audio") |>
  filter(Topic2 %in% c(	  "Dante")) |>
  filter(Topic3 == "Level 3") |>
  mutate(Title = md(glue("[{Title}]({URL})"))) |>	
  select(Topic3, Episode, Duration , Title, Notes )  |>
  arrange(Topic3, Episode) |>	
  rename(Module = Topic3) |>
  gt(rowname_col = "Episode", groupname_col="Module") |>  
	   #summary_rows(fns = list("n") ) |>
		opt_stylize(style = 3) |>
	    opt_row_striping(  row_striping = TRUE) |>
	fmt_markdown(
  columns = "Title",
  rows = everything(),
  md_engine = c("markdown")) |>
  sub_missing( columns =  "Notes",
				rows = everything(),
				missing_text = "---") |>
	cols_align( align =   "left"  ,
				columns =  "Title")
```

There is also an extensive library of videos on MxU. 

# Console Inputs

There are four interfaces which facilitate inputs to the dLive system. In total all possible inputs map to the system maximum of 128 inputs.

__1. DM64 Inputs__
 The analog input jacks on the DM64 mounted in the amp rack. There are 64 inputs. The first 52 of those are wired to the jacks in the floor pockets on stage.

__2. DX168 Inputs__
There are 16 analog inputs in the small stage rack located next to the drum riser. There are used for the drum inputs, and the bass. 

__3. Dante Inputs__
I/O expansion port #1 on the DM64 is fitted with a 128x128 port Dante card. This is used for 16 inputs from the Shure ULXD receivers, two inputs from the ProPresenter computer, and 64 inputs from the Propresenter computer used for Virtual Soundcheck. The other computers can also provide Dante inputs.

__4. Surface Inputs__ The console surface has 8 analog inputs on the back which are used for the talkback mic, the reference mic, the guest computer and the CD Player.

Part of what is included in the scene definition is the channel layout. 

See @fig-m7cl-inputs-analog, @fig-m7cl-inputs-dante and @fig-dm1k-inputs.

```{r m7-inputs-analog, eval=FALSE}
#| label: fig-m7cl-inputs-analog
#| fig-cap: M7CL Inputs (Analog)
get_inputs("M7CL", "002") |>
  filter(is.na(NetworkDevice)) |>	
  select(-NetworkDevice, -NetworkDeviceChannel) |>	
  gt() |>
  tab_header("M7CL-48 Input Map - Analog") |>
  opt_stylize(style=3) |>
	sub_missing(  missing_text = "-")  
```

```{r m7-inputs-dante, eval=FALSE}
#| label: fig-m7cl-inputs-dante
#| fig-cap: M7CL Inputs (Dante)
get_inputs("M7CL", "002") |>
  filter(!is.na(NetworkDevice)) |>	
  gt() |>
  tab_header("M7CL-48 Input Map - Dante") |>
  opt_stylize(style=3) |>
	sub_missing(  missing_text = "-") |>
	cols_label( NetworkDevice ="Net Device"
			  , NetworkDeviceChannel = "Net Channel")
```

```{r, eval=FALSE}
#| label: fig-dm1k-inputs
#| fig-cap: DM1K Inputs
get_inputs("DM1K", "002") |>
  gt() |>
  tab_header("DM1000 Input Map") |>
  opt_stylize(style=3) |>
	sub_missing(  missing_text = "-") |>
	cols_label( NetworkDevice ="Net Device"
			  , NetworkDeviceChannel = "Net Channel")
```


# Console Outputs

Similar to the system inputs, there are outputs in four separate interfaces. 

__1. DM64 Outputs__
There are 32 analog outputs on the front face of the DM64 mounted in the amp rack. Two of those are used as analog backup 

## Monitors

We have six monitor amplifier channels, each which can handle a load of two of our monitor wedges. 

Our standard monitor configuration is (@fig-monitors)

```{r gt.monitors}
#| label: fig-monitors
#| fig-cap: Standard Monitor Map
get_monitors() |>
	gt() |>
	tab_header("Standard Monitor Map") |>
	opt_stylize(style=3) 
```

## Effects

Busses 7, 8, 9 and 10 are used for routing a mix to the internal effects processor which then appears as inputs on the return faders. 

Bus 7
: The Post-fade mix is sent to a **plate reverb** processor which then appears on return channel 1.

Bus 8
: The Post-fade mix is sent to a **hall reverb** processor which then appears on return channel 2.

Bus 9
: The Post-fade mix is sent to a **delay** processor which then appears on return channel 3.

Bus 10
: The Post-fade mix is sent to a **chorus** processor which then appears on return channel 4.

## Dante Outputs

```{r dante_outputs}
#| label: fig-dante-outputs
#| fig-cap: Dante Ouputs
get_dante_outputs() |>
	filter(Device == 'ZAKU-0001') |>
	select(-Device) |>
	gt() |>
	tab_header("M7CL Dante Outputs") |>
	opt_stylize(style=3)
```


## Other Busses
Bus 14 is used for recording. 
The Mono bus is used for lobby.

 
 



# Basic Operations

## The Console

The main audio console is located in the balcony. It can also be operated remotely via dLive Director installed on the Mac in the broadcast room or a tablet running the dLive Mix App.

## Scene Recall 

Scenes are a collection of settings that can be stored and recalled together. This is a very effective way of getting to a good known state. We have created a scene (**Master #001**) which should be used as a base for start an event. This scenes is locked so that they cannot be easily overwritten. If you would like to make a change to a base scene, please discuss with Terry.

When recalling a scene, whatever is being recalled will (almost) instantly become active or inactive. You __don't__ what to do this when live, unless you know exactly what you are doing.

__Scene 001__

To recall Scene 001, press the scene button on the right hand side, and then using the right monitor, scroll to the top of the list where you will find "Master". Touch it to select it and then press the physical "Go" button to the right.   (@fig-soa-dlive-scene-recall).

![Scene Recall](./images/soa-dlive-scene-recall.png){#fig-soa-scene-recall width=65mm}

## dLive Softkeys 

The softkeys allow the operator to quickly access common features. They are located on the very right hand side of the console, see figure @fig-soa-dlive-softkeys

```{r}
#| label: fig-user-defined-keys-table
#| fig-cap: M7CL User Defined Keys
softkeys <- tribble(
~Key , ~Function 
,"1","Monitor 1 to faders"  
,"2","Monitor 2 to faders"  
,"3","Monitor 3 to faders"  
,"4","Monitor 4 to faders"  
,"5","Monitor 5 to faders"  
,"6","Monitor 6 to faders"  
,"7","Monitor 7 to faders" 
,"8","Monitor 8 to faders"
,"x","Delay Tap-effect timing"
,"x","Plate effect to faders"
,"x","Hall effect to faders"
,"x","Delay effect to faders"
,"x","Chorus effect to faders"
	)

gt(softkeys) |>
	opt_stylize(style=3) |>
	tab_header("Softkeys Keys")
```

![M7CL Centre Controls](./images/soa-m7cl-centre-controls.jpg){#fig-soa-m7cl-centre-controls width=50mm}
 
# Operating a Channel

:::{.callout-important}
Some of the changes you make on channel inputs can also affect what happens on the Livestrean mixer. These require communication between the two engineers.

* Microphone selection for anything non-standard, or extra

* Adjustments to preamp gain (aka headamp gain), it is normal to change early during rehearsal, but after that a change should be communicated. 

* Other changes can also make an impact but are not likely to occur in normal operation. For example: adjusting the *Direct Out* levels of certain channels, or adjusting the mix or master level of busses 11-14.

See @fig-dante-outputs for more details.
:::

The channels are laid out 32 on the left hand side and 16 on the right; all in groups of 8. The bank of 8 faders in the centre mirrors one of those groups or can be used to access other functions like the monitor masters. 

## The Buttons

Each of the channel strips has three buttons, **SEL**, **CUE**, and **ON**.

__SEL__

The **SEL** button *selects* that channel and brings it into focus on the display. The knobs to the left of the display make the adjustments to the selected channel.  

__CUE__

The **CUE** button activates that channel to be heard via the headphones. The volume on the headphones can be adjusted via the monitor level below-right to the screen as well as the the knob under the wrist rest in the centre. 

Multiple channels can be **CUE**d at the same time. 

__ON__

The **ON** button turns the channel on. 

:::{.callout-note}
Turning a channel off also affects the direct out send to the livestream mixer.
:::

## Monitors on Faders

To adjust the monitor mix you can press on of the buttons labelled "M1" thru "M6" to the lower-right of the screen. Pressing the same button will revert the faders to the main mix.

## Preamp Gain Adjustments

The preamp gain is also refered to as *Head Amplifier*, and abbreviated *HA*.

The means to adjust the preamp gain follows one of two methods: Analog (wired) inputs and Dante (wireless) inputs.

Adjusting the preamp input gain also affects the level sent to the livestream mixer.

__Analog (wired) Inputs__

To adjust the gain for a microphone, use the **SEL** button and then use the **HA** knob. 

__Dante (wireless) Inputs__

The mixer cannot control the preamp gain for the wireless receivers. Instead this needs to be adjusted directly on the receivers. Each receiver is for 4 microphones and there are a pair of up-down buttons for each which will adjust the gain.

The wireless gain settings are not stored and recalled as part of the scene so you will inherit whatever was last used. 

## Handling Feedback

Audio feedback occurs when a microphone and a speaker, creates a loop in which sound from the speaker is picked up by the microphone and then amplified and re-emitted by the speaker. This results in a high-pitched, unpleasant squealing or howling noise. Audio feedback is an unintended and undesirable phenomenon in audio systems, and it can be caused by factors like microphone placement, high microphone sensitivity, or a loudspeaker's proximity to the microphone. 

To control/eliminate feedback, several approaches can be taken. In approximate priority of application:

* Turn off any other microphones that are not needed.

* Turn down the problem microphone in the speaker which is causing the problem. This could be a monitor or the main house.

* Change the placement of the microphone and/or the monitor speakers involved.

* Eq can be applied to reduce the level of the problem frequency. (Ear training helps the engineer quickly know what frequency to target.) You typically want a high Q, which means the EQ filter applies to a narrow band of frequencies.

* In some circumstances you can add a slight delay, less than 10 ms, on the problem microphone and that can inhibit the feedback cycle.

* Using the phase invesion switch can help when desperate but can cause other weird effects, especially of multiple microphones are in use.


# Operating the Wireless Microphones

We have 18 wireless transmitters and 12 receivers. A receiver can only be paried with on transmitter at a time, which means we can have, at most 12 active transmitters.

Of the 18 transmitters, 12 are handheld microphones, and 6 are beltpack units that can be fitted with either a headset or lavalier microphone.

The six beltpack trasnmitters are all routed to the DM1K mixer, with BP06 also being routed to the M7CL as it is used by Ken for his vocal mic.

The 12 handheld transmitters are all routed to the M7CL to be used as for talking or singing.

__Battery Management__

Each trasnmitter takes two AA batteries. The battery level is visible on both the trasnmitter and the reciever displays. When using Duracell Coppertop batteries each 'segment' on the display indicates about 30 minutes of runtime, but never count on the last segment. In figure @fig-soa-battery1, channel 3 has about 1.5 hours of runtime and channel 4 has about 2 hours (5 segments minus one). 

The display on the microphone is similar, but for one channel only.

![Receiver Display](./images/soa-battery1.png){#fig-soa-battery1 width=65mm}

Old batteries are to be discarded in the collection bin to the left of the console.

__Head Amp Gain__

The preamplifier gain cannot be controlled from the console. It is set via the buttons on the front panel of the receivers. This also means that the gain setting is not recalled with a scene recall.
 

# Appendix

## Audio Recording - Audio CD

We don't do this normally but if desired this is how.

Key Steps:

#. Place a blank CD into the recorder and close the tray. It will take a few moments to recognize the disc type.
#. Press the Auto/Manual (or is it tracking) button on the left hand side to select whether you want new tracks created automatically or not.
#. Press the record button to begin recording
#. Press the record button again to start a new track when desired.
#. Press stop when done. The display will flash a PMA message for a few moments
#. To Finalize. 
    * Press the "Finalize" button, it will think for a moment or three and the display will show a time. (usually 2:01). 
    * Push Play and it will begin finalizing. The time will count down.
    * Eject disc, remove disc
    * Close tray.
#. If for some reason the audio CD was not finalized, put it back into the recorder and pick up the instructions at step #6.

## Terminology

```{r}
# A hack - gt doesn't provide a means of line-breaking for pdf. So we create a graphic and then include the graphic.

tab <- get.glossary() |>
	filter(Topic == "Audio" | Topic == "General") |>
	select(Term, Definition, Topic) |>
	arrange(Topic, Term) |>
    gt(groupname_col = "Topic") |>
	opt_stylize(style=3) |>
	fmt_markdown(columns=Definition) |>
	tab_style(
  style = cell_text(weight = "bold", size="large"),
  locations = cells_row_groups()
)
```

```{r glossary, results='asis'}
cat(print_gt_table(tab))
```

{{< include common_trailer.qmd >}}
